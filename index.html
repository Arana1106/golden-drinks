<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINNER'S</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== ESTILOS SINNER'S - ÁNGELES vs DEMONIOS ===== */
        @import url('https://fonts.googleapis.com/css2?family=Nosifer&family=Eater&family=Cinzel:wght@400;700&family=MedievalSharp&display=swap');
        
        :root {
            --opacidad-cielo: 1;
            --opacidad-infierno: 0;
            --scroll-porcentaje: 0;
            --color-angelical: #6495ED;
            --color-demoníaco: #8B0000;
            --color-dorado: #FFD700;
            --color-plateado: #C0C0C0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: 'Cinzel', serif;
            background: #000000;
            color: #d0d0d0;
            overflow-x: hidden;
            position: relative;
            touch-action: manipulation;
            transition: all 0.5s ease;
        }

        /* Fondo dinámico que cambia con el scroll */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                /* Cielo - Gradiente azul */
                linear-gradient(to bottom, 
                rgba(100, 149, 237, calc(0.3 * var(--opacidad-cielo))) 0%,
                rgba(65, 105, 225, calc(0.2 * var(--opacidad-cielo))) 20%,
                transparent 40%),
                /* Infierno - Gradiente rojo */
                linear-gradient(to top, 
                rgba(139, 0, 0, calc(0.4 * var(--opacidad-infierno))) 0%,
                rgba(178, 34, 34, calc(0.3 * var(--opacidad-infierno))) 30%,
                transparent 70%),
                /* Partículas celestiales/demoníacas */
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle fill="rgba(100,149,237,0.05)" cx="30" cy="30" r="2"/><circle fill="rgba(139,0,0,0.05)" cx="70" cy="40" r="1.5"/><circle fill="rgba(255,215,0,0.05)" cx="50, 70" r="1.8"/><circle fill="rgba(192,192,192,0.05)" cx="80" cy="80" r="1.3"/></svg>') repeat;
            z-index: -1;
            opacity: calc(0.8 + (0.2 * var(--opacidad-infierno)));
            transition: all 0.5s ease;
        }

        /* ===== HEADER ===== */
        .header{
            text-align: center;
            padding: 20px 15px;
            background: linear-gradient(135deg, 
                rgba(139, 0, 0, 0.15) 0%, 
                rgba(0, 0, 0, 0.95) 80%);
            border-bottom: 3px solid var(--color-demoníaco);
            border-top: 3px solid var(--color-demoníaco);
            box-shadow: 0 5px 25px rgba(139, 0, 0, 0.5);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            backdrop-filter: blur(5px);
            transition: all 0.5s ease;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top center, 
                rgba(139, 0, 0, 0.2) 0%, 
                transparent 70%);
            z-index: -1;
        }

        .titulo-principal {
            font-family: 'Nosifer', cursive;
            font-size: 2.5rem;
            color: var(--color-demoníaco);
            text-shadow: 
                2px 2px 0 #000, 
                -1px -1px 0 #000, 
                1px -1px 0 #000, 
                -1px 1px 0 #000, 
                0 0 15px var(--color-demoníaco), 
                0 0 30px #4B0082;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.3s ease;
            margin: 0 auto;
            cursor: pointer;
        }

        /* ===== BOTÓN CARRITO ===== */
        #carrito-btn{
            background: rgba(139, 69, 19, 0.8);
            border: 2px solid #8b0000;
            border-radius: 8px;
            width: 60px;
            height: 60px;
            font-size: 1.4rem;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--color-dorado);
            font-family: 'MedievalSharp', cursive;
            box-shadow: 0 0 10px rgba(139, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        #carrito-btn:hover {
            background: rgba(160, 90, 40, 0.9);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.6);
        }

        #contador {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff0000;
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        /* ===== CONTENEDOR PRINCIPAL ===== */
        .contenedor-principal{
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        /* ===== CATEGORÍAS ===== */
        .categoria{
            margin-bottom: 35px;
            position: relative;
            transition: opacity 0.8s ease, transform 0.5s ease;
        }

        .categoria-titulo {
            font-family: 'Eater', cursive;
            font-size: 1.6rem;
            padding: 12px 20px;
            margin: 20px 0 15px 0;
            border-radius: 8px;
            display: inline-block;
            position: relative;
            text-shadow: 2px 2px 0 #000;
            transition: all 0.4s ease;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.7), rgba(100, 0, 0, 0.6));
            color: #ffa0a0;
            box-shadow: 0 0 20px rgba(139, 0, 0, 0.4);
        }

        /* ===== PRODUCTOS ===== */
        .productos-container{
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 15px 0 25px 0;
        }

        .producto-card {
            border-radius: 15px;
            padding: 20px;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(3px);
            background: linear-gradient(135deg, rgba(100, 20, 60, 0.6), rgba(120, 10, 40, 0.5));
            border: 2px solid rgba(220, 20, 60, 0.5);
            box-shadow: 0 8px 25px rgba(220, 20, 60, 0.3);
        }

        .producto-card:hover {
            transform: translateY(-5px);
            backdrop-filter: blur(1px);
            border-color: rgba(220, 20, 60, 0.8);
            box-shadow: 0 12px 35px rgba(220, 20, 60, 0.5);
        }

        .producto-card h3{
            font-family: 'Cinzel', serif;
            font-size: 1.7rem;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: bold;
            text-shadow: 2px 2px 0 #000;
            line-height: 1.2;
            transition: all 0.3s ease;
        }

        /* Colores específicos para cada producto */
        .producto-card h3[data-producto="LEVIATÁN"]{ color: #5a8eff; }
        .producto-card h3[data-producto="INFIERNO"]{ color: #ff3b4a; }
        .producto-card h3[data-producto="JALURIA"]{ color: #4aff4a; }
        .producto-card h3[data-producto="ASMODEO"]{ color: #b28aff; }
        .producto-card h3[data-producto="IRA DIVINA"]{ color: #c28c4a; }
        .producto-card h3[data-producto="PACTUM"]{ color: #e6c99c; }
        .producto-card h3[data-producto="REDENCIÓN"]{ color: #ffd75a; }
        .producto-card h3[data-producto="REVELACIÓN"]{ color: #ffea80; }

        .producto-card p {
            color: #d8d8d8;
            line-height: 1.6;
            margin: 10px 0;
            font-size: 0.95rem;
            font-family: 'MedievalSharp', cursive;
            letter-spacing: 0.3px;
        }

        .producto-card .precio {
            font-weight: bold;
            font-size: 1.4rem;
            margin: 15px 0;
            text-shadow: 1px 1px 2px #000;
            font-family: 'Cinzel', serif;
            letter-spacing: 1px;
            padding: 8px 15px;
            border-radius: 6px;
            display: inline-block;
            color: #e0e0e0;
            background: linear-gradient(135deg, rgba(100, 100, 120, 0.3), rgba(70, 70, 90, 0.2));
            border: 2px solid #2a2a2a;
            box-shadow: 0 0 10px rgba(200, 200, 200, 0.3);
        }

        /* ===== BOTONES ===== */
        .btn-seleccionar{
            width: 100%;
            margin-top: 12px;
            text-transform: uppercase;
            font-size: 16px;
            min-height: 48px;
            padding: 14px 20px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-family: 'Cinzel', serif;
            letter-spacing: 1px;
            background: linear-gradient(135deg, #8b0000, #600);
            color: #FFF;
            border: 2px solid #ff6b6b;
            box-shadow: 0 0 12px rgba(139, 0, 0, 0.5);
        }

        .btn-seleccionar:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 18px rgba(255, 255, 255, 0.4);
            background: linear-gradient(135deg, #a00404, #700);
        }

        /* ===== MODALES ===== */
        .modal{
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.97);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 15px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        .modal:not(.modal-oculto) {
            opacity: 1;
            visibility: visible;
        }

        .modal-contenido {
            background: linear-gradient(135deg, #1a0000 0%, #2a0000 100%);
            padding: 28px;
            border-radius: 12px;
            border: 3px solid #8b0000;
            box-shadow: 0 0 35px rgba(139, 0, 0, 0.6);
            max-width: 95%;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.4s ease;
        }

        .modal:not(.modal-oculto) .modal-contenido {
            transform: translateY(0);
        }

        .cerrar-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 30px;
            color: #ffd700;
            cursor: pointer;
            text-shadow: 0 0 5px #000;
            z-index: 1001;
            font-family: 'Cinzel', serif;
            transition: all 0.3s ease;
        }

        .cerrar-modal:hover {
            color: #ff0000;
            transform: scale(1.1);
        }

        .modal-oculto {
            display: none;
        }

        /* Formulario de opciones */
        .opcion-group {
            margin-bottom: 20px;
        }

        .opcion-group h3 {
            color: #ffd700;
            margin-bottom: 10px;
            font-family: 'Cinzel', serif;
        }

        .opcion-group label {
            display: block;
            margin: 8px 0;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .opcion-group label:hover {
            background: rgba(139, 0, 0, 0.3);
        }

        .opcion-group input[type="radio"] {
            margin-right: 10px;
        }

        /* ===== FOOTER ===== */
        .footer{
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            background: #000000;
            border-top: 3px solid #8b0000;
            position: relative;
            overflow: hidden;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, 
                rgba(139, 0, 0, 0.1) 0%, 
                transparent 70%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80"><path fill="rgba(139,0,0,0.1)" d="M40,10 C45,25 55,25 60,30 C55,35 55,45 50,40 C45,50 40,45 35,40 C30,45 30,35 25,30 C30,25 35,25 40,10 Z"/></svg>') repeat;
            z-index: -1;
        }

        .eslogan {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem;
            color: #ffd700;
            text-shadow: 1px 1px 2px #000, 0 0 8px rgba(255, 0, 0, 0.5);
            margin-bottom: 15px;
            font-style: italic;
            text-transform: uppercase;
        }

        .copyright {
            font-family: 'MedievalSharp', cursive;
            font-size: 1rem;
            color: #ffffff;
            text-shadow: 1px 1px 2px #000;
            text-transform: uppercase;
        }

        /* ===== TEMA ANGELICAL ===== */
        body.tema-angeles {
            --opacidad-infierno: 0;
            --opacidad-cielo: 1;
        }

        body.tema-angeles::before {
            opacity: 0.7;
            background: 
                linear-gradient(to bottom, 
                rgba(100, 149, 237, 0.3) 0%,
                rgba(65, 105, 225, 0.2) 20%,
                transparent 40%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle fill="rgba(255,255,255,0.1)" cx="20" cy="20" r="1.5"/><circle fill="rgba(255,215,0,0.1)" cx="60" cy="30" r="1.2"/><circle fill="rgba(100,149,237,0.1)" cx="40" cy="60" r="1.8"/><circle fill="rgba(255,255,255,0.1)" cx="70" cy="70" r="1.0"/></svg>') repeat;
        }

        body.tema-angeles .header {
            background: linear-gradient(135deg, 
                rgba(100, 149, 237, 0.15) 0%, 
                rgba(0, 0, 0, 0.95) 80%);
            border-bottom: 3px solid var(--color-angelical);
            border-top: 3px solid var(--color-angelical);
            box-shadow: 0 5px 25px rgba(100, 149, 237, 0.5);
        }

        body.tema-angeles .header::before {
            background: radial-gradient(circle at top center, 
                rgba(100, 149, 237, 0.2) 0%, 
                transparent 70%);
        }

        body.tema-angeles .titulo-principal {
            color: var(--color-angelical);
            text-shadow: 
                2px 2px 0 #000, 
                -1px -1px 0 #000, 
                1px -1px 0 #000, 
                -1px 1px 0 #000, 
                0 0 15px var(--color-angelical), 
                0 0 30px #4169E1;
        }

        body.tema-angeles .categoria-titulo {
            background: linear-gradient(135deg, rgba(100, 149, 237, 0.7), rgba(65, 105, 225, 0.6));
            color: #a0d0ff;
            box-shadow: 0 0 20px rgba(100, 149, 237, 0.4);
        }

        body.tema-angeles .producto-card {
            background: linear-gradient(135deg, rgba(70, 100, 170, 0.6), rgba(50, 80, 150, 0.5));
            border: 2px solid rgba(100, 149, 237, 0.5);
            box-shadow: 0 8px 25px rgba(100, 149, 237, 0.3);
        }

        body.tema-angeles .producto-card:hover {
            border-color: rgba(100, 149, 237, 0.8);
            box-shadow: 0 12px 35px rgba(100, 149, 237, 0.5);
        }

        body.tema-angeles .btn-seleccionar {
            background: linear-gradient(135deg, #4169E1, #1E90FF);
            border: 2px solid #a0d0ff;
            box-shadow: 0 0 12px rgba(65, 105, 225, 0.5);
        }

        body.tema-angeles .btn-seleccionar:hover {
            background: linear-gradient(135deg, #1E90FF, #00BFFF);
        }

        body.tema-angeles .footer {
            border-top: 3px solid var(--color-angelical);
        }

        body.tema-angeles .footer::before {
            background: radial-gradient(ellipse at center, 
                rgba(100, 149, 237, 0.1) 0%, 
                transparent 70%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 80 80"><path fill="rgba(100,149,237,0.1)" d="M40,10 C45,25 55,25 60,30 C55,35 55,45 50,40 C45,50 40,45 35,40 C30,45 30,35 25,30 C30,25 35,25 40,10 Z"/></svg>') repeat;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .titulo-principal {
                font-size: 2rem;
            }
            
            .modal-contenido {
                width: 95%;
                padding: 20px;
                margin: 10px;
            }
            
            .productos-container {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 15px 10px;
            }
            
            .categoria-titulo {
                font-size: 1.4rem;
                padding: 10px 15px;
            }
        }

        /* Efecto de pulso para botón de carrito cuando se añade producto */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .pulse-effect {
            animation: pulse 0.5s ease;
        }

        /* Items del carrito */
        .item-carrito {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .item-info h4 {
            margin-bottom: 5px;
            color: #ffd700;
        }

        .precio-item {
            color: #ff6b6b;
            font-weight: bold;
        }

        .item-controles {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-controles button {
            background: rgba(139, 0, 0, 0.5);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
        }

        .carrito-vacio {
            text-align: center;
            padding: 30px;
            color: #888;
        }

        .botones-opciones, .botones-carrito, .botones-ubicacion {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .botones-opciones button, .botones-carrito button, .botones-ubicacion button {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-weight: bold;
        }

        #regresar-modal, #regresar-carrito, #seguir-pidiendo {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        #confirmar-opciones, #whatsapp-btn, #confirmar-ubicacion {
            background: linear-gradient(135deg, #8b0000, #600);
            color: white;
        }

        .ubicacion-info {
            margin: 20px 0;
        }

        .direccion-clickeable {
            padding: 15px;
            background: rgba(139, 0, 0, 0.2);
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .direccion-clickeable:hover {
            background: rgba(139, 0, 0, 0.3);
        }

        .horario-ubicacion {
            line-height: 1.6;
        }

        /* Alerta de pedido mínimo */
        .alerta-minimo {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #8b0000, #600);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 350px;
        }

        .alerta-minimo .cerrar-alerta {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            margin-left: 10px;
        }

        .preparacion-info {
            background: rgba(139, 0, 0, 0.2);
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        /* Sección de combos */
        .combos-section {
            margin: 40px 0;
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(135deg, rgba(100, 20, 60, 0.6), rgba(120, 10, 40, 0.5));
            border: 2px solid rgba(220, 20, 60, 0.5);
        }

        .combos-section h2 {
            font-family: 'Eater', cursive;
            text-align: center;
            margin-bottom: 20px;
            color: #ffa0a0;
        }

        .combo-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .combo-card h3 {
            color: #ffd700;
            margin-bottom: 10px;
        }

        .combo-card p {
            margin-bottom: 15px;
        }

        .combo-card .precio-combo {
            font-size: 1.3rem;
            color: #ff6b6b;
            font-weight: bold;
            margin-bottom: 15px;
        }

        body.tema-angeles .combos-section {
            background: linear-gradient(135deg, rgba(70, 100, 170, 0.6), rgba(50, 80, 150, 0.5));
            border: 2px solid rgba(100, 149, 237, 0.5);
        }

        body.tema-angeles .combo-card {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Estilos para detalles de variables en el carrito */
        .detalles-variables {
            font-size: 0.85rem;
            color: #aaa;
            margin-top: 5px;
        }

        .detalles-variables div {
            margin: 3px 0;
        }
    </style>
</head>
<body class="tema-demonios">
    <!-- Alerta de pedido mínimo -->
    <div class="alerta-minimo" id="alerta-minimo">
        <div>
            <strong>PEDIDO MÍNIMO</strong>
            <p>No aceptamos pedidos con menos de 3 productos. Agrega más items para continuar.</p>
        </div>
        <button class="cerrar-alerta" id="cerrar-alerta">&times;</button>
    </div>

    <!-- HEADER -->
    <header class="header">
        <h1 class="titulo-principal" id="titulo-tema">SINNER'S</h1>
        <div class="cart-icon" id="carrito-btn">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-count" id="contador">0</span>
        </div>
    </header>

    <!-- CONTENEDOR PRINCIPAL -->
    <main class="contenedor-principal">
        <!-- CATEGORÍA 1 - BEBIDAS -->
        <section class="categoria">
            <h2 class="categoria-titulo">Bebidas</h2>
            <div class="productos-container" id="bebidas-container">
                <!-- Los productos se cargarán dinámicamente -->
            </div>
        </section>

        <!-- CATEGORÍA 2 - CAFÉS -->
        <section class="categoria">
            <h2 class="categoria-titulo">Cafés</h2>
            <div class="productos-container" id="cafes-container">
                <!-- Los productos se cargarán dinámicamente -->
            </div>
        </section>

        <!-- CATEGORÍA 3 - TÉS -->
        <section class="categoria">
            <h2 class="categoria-titulo">Tés</h2>
            <div class="productos-container" id="tes-container">
                <!-- Los productos se cargarán dinámicamente -->
            </div>
        </section>

        <!-- SECCIÓN DE COMBOS (solo visible en tema demonios) -->
        <div class="combos-section" id="combos-demonios">
            <h2>PECADOS RECOMENDADOS</h2>
            <div class="combo-card">
                <h3>TRINIDAD DEL INFIERNO</h3>
                <p>INFERNO + ASMODEO + REVELACIÓN</p>
                <p class="precio-combo">$120.00 MXN</p>
                <button class="btn-seleccionar" onclick="seleccionarCombo('demonios')">SELECCIONAR COMBO</button>
            </div>
        </div>

        <!-- SECCIÓN DE COMBOS (solo visible en tema ángeles) -->
        <div class="combos-section" id="combos-angeles" style="display: none;">
            <h2>MANDAMIENTOS DEL DÍA</h2>
            <div class="combo-card">
                <h3>SANTÍSIMA TRINIDAD</h3>
                <p>LEVIATÁN + JALURIA + REDENCIÓN</p>
                <p class="precio-combo">$120.00 MXN</p>
                <button class="btn-seleccionar" onclick="seleccionarCombo('angeles')">SELECCIONAR COMBO</button>
            </div>
        </div>
    </main>

    <!-- MODALES -->
    <div id="modal-opciones" class="modal modal-oculto">
        <div class="modal-contenido">
            <span class="cerrar-modal" id="cerrar-opciones">&times;</span>
            <h2 id="titulo-modal">Personalizar Producto</h2>
            <form id="formulario-opciones"></form>
            <div class="botones-opciones">
                <button id="regresar-modal">REGRESAR</button>
                <button id="confirmar-opciones">AGREGAR AL CARRITO</button>
            </div>
        </div>
    </div>

    <div id="modal-carrito" class="modal modal-oculto">
        <div class="modal-contenido">
            <span class="cerrar-modal" id="cerrar-carrito">&times;</span>
            <h2>Tu Pedido Infernal</h2>
            <div id="lista-carrito" class="items-carrito"></div>
            <p id="total-carrito" class="precio-total">Total: $0.00 MXN</p>
            <div class="botones-carrito">
                <button id="seguir-pidiendo">SEGUIR PIDIENDO</button>
                <button id="whatsapp-btn">CONFIRMAR PECADO</button>
            </div>
        </div>
    </div>

    <div id="modal-ubicacion" class="modal modal-oculto">
        <div class="modal-contenido">
            <span class="cerrar-modal" id="cerrar-ubicacion">&times;</span>
            <h2>Lugar de Entrega del Pecado</h2>
            <div class="ubicacion-info">
                <div class="direccion-clickeable" id="abrir-maps">
                    ⚡ Calle Coral 120, colonia Estrella, CDMX
                </div>
                <div class="preparacion-info">
                    ESTA DIRECCIÓN TIENE UN TIEMPO DE PREPARACION APROXIMADO DE 5 MINUTOS DESPUÉS DE REALIZAR EL PEDIDO.
                </div>
                <p class="horario-ubicacion">
                    Lunes a Jueves: 4:00 PM - 9:00 PM<br>
                    Viernes: 4:00 PM - 1:00 AM<br>
                    Sábado: 11:00 AM - 2:00 AM<br>
                    Domingo: 10:00 AM - 7:00 PM
                </p>
            </div>
            <div class="botones-ubicacion">
                <button id="regresar-carrito">VOLVER ATRÁS</button>
                <button id="confirmar-ubicacion">ENVIAR PECADO</button>
            </div>
        </div>
    </div>

    <!-- MODAL PARA COMBOS -->
    <div id="modal-combo" class="modal modal-oculto">
        <div class="modal-contenido">
            <span class="cerrar-modal" id="cerrar-combo">&times;</span>
            <h2 id="titulo-combo">Personalizar Combo</h2>
            <div id="opciones-combo"></div>
            <div class="botones-opciones">
                <button id="regresar-combo">REGRESAR</button>
                <button id="confirmar-combo">AGREGAR COMBO AL CARRITO</button>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p class="eslogan">PUREZA CORRUPTA POR LA LUJURIA EN CADA SORBO</p>
        <p class="copyright">© 2023 SINNER'S - ELEGIR ES UN PECADO, NO ELEGIR ES CONDENARSE</p>
    </footer>

    <!-- JavaScript -->
    <script>
        // Datos de productos
        const productos = {
            bebidas: [
                { 
                    id: 1, 
                    nombre: "LEVIATÁN", 
                    sabor: "Mora azul", 
                    precio: 45, 
                    opciones: {
                        "TOPSINS": ["Sin topping (+$0)", "Boba (+$15)", "Alcohol (+$20)"]
                    }
                },
                { 
                    id: 2, 
                    nombre: "INFIERNO", 
                    sabor: "Frutos rojos + limón", 
                    precio: 45, 
                    opciones: {
                        "TOPSINS": ["Sin topping (+$0)", "Boba (+$15)", "Alcohol (+$20)"]
                    }
                },
                { 
                    id: 3, 
                    nombre: "JALURIA", 
                    sabor: "Manzana verde + jengibre", 
                    precio: 45, 
                    opciones: {
                        "TOPSINS": ["Sin topping (+$0)", "Boba (+$15)", "Alcohol (+$20)"]
                    }
                },
                { 
                    id: 4, 
                    nombre: "ASMODEO", 
                    sabor: "Frutos rojos", 
                    precio: 45, 
                    opciones: {
                        "TOPSINS": ["Sin topping (+$0)", "Boba (+$15)", "Alcohol (+$20)"]
                    }
                }
            ],
            cafes: [
                { 
                    id: 5, 
                    nombre: "IRA DIVINA", 
                    sabor: "Café + leche", 
                    precio: 35, 
                    opciones: {
                        "LECHE": ["Normal (+$0)", "Deslactosada (+$10)"],
                        "ENDULZANTE": ["Azúcar (+$0)", "Sustituto (+$0)", "Sin endulzante (+$0)"]
                    }
                },
                { 
                    id: 6, 
                    nombre: "PACTUM", 
                    sabor: "Café descafeinado", 
                    precio: 35, 
                    opciones: {
                        "LECHE": ["Normal (+$0)", "Deslactosada (+$10)"]
                    }
                }
            ],
            tes: [
                { 
                    id: 7, 
                    nombre: "REDENCIÓN", 
                    sabor: "Manzanilla, negro o verde", 
                    precio: 35, 
                    opciones: {
                        "ENDULZANTE": ["Azúcar (+$0)", "Sustituto (+$0)", "Sin endulzante (+$0)"]
                    }
                },
                { 
                    id: 8, 
                    nombre: "REVELACIÓN", 
                    sabor: "Agua del día", 
                    precio: 35, 
                    opciones: {
                        "ENDULZANTE": ["Azúcar (+$0)", "Sustituto (+$0)", "Sin endulzante (+$0)"]
                    }
                }
            ]
        };

        // Datos de combos
        const combos = {
            demonios: {
                nombre: "TRINIDAD DEL INFIERNO",
                productos: ["INFIERNO", "ASMODEO", "REVELACIÓN"],
                precioBase: 120,
                descripcion: "INFERNO + ASMODEO + REVELACIÓN"
            },
            angeles: {
                nombre: "SANTÍSIMA TRINIDAD",
                productos: ["LEVIATÁN", "JALURIA", "REDENCIÓN"],
                precioBase: 120,
                descripcion: "LEVIATÁN + JALURIA + REDENCIÓN"
            }
        };

        // Variables globales
        let carrito = [];
        let productoSeleccionado = null;
        let opcionesSeleccionadas = {};
        let comboSeleccionado = null;
        let opcionesComboSeleccionadas = {};

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            cargarProductos();
            actualizarCarrito();
            configurarEventos();
        });

        // Configurar eventos
        function configurarEventos() {
            // Cambio de tema con doble clic
            document.getElementById('titulo-tema').addEventListener('dblclick', cambiarTema);
            
            // Botón carrito
            document.getElementById('carrito-btn').addEventListener('click', abrirModalCarrito);
            
            // Cerrar modales
            document.getElementById('cerrar-opciones').addEventListener('click', cerrarModalOpciones);
            document.getElementById('cerrar-carrito').addEventListener('click', cerrarModalCarrito);
            document.getElementById('cerrar-ubicacion').addEventListener('click', cerrarModalUbicacion);
            document.getElementById('cerrar-combo').addEventListener('click', cerrarModalCombo);
            document.getElementById('cerrar-alerta').addEventListener('click', function() {
                document.getElementById('alerta-minimo').style.display = 'none';
            });
            
            // Botones de modales
            document.getElementById('regresar-modal').addEventListener('click', cerrarModalOpciones);
            document.getElementById('confirmar-opciones').addEventListener('click', confirmarSeleccion);
            document.getElementById('seguir-pidiendo').addEventListener('click', cerrarModalCarrito);
            document.getElementById('whatsapp-btn').addEventListener('click', mostrarSeleccionUbicacion);
            document.getElementById('regresar-carrito').addEventListener('click', cerrarModalUbicacion);
            document.getElementById('confirmar-ubicacion').addEventListener('click', enviarPedidoWhatsApp);
            document.getElementById('regresar-combo').addEventListener('click', cerrarModalCombo);
            document.getElementById('confirmar-combo').addEventListener('click', confirmarCombo);
            document.getElementById('abrir-maps').addEventListener('click', abrirGoogleMaps);
            
            // Cerrar modales al hacer clic fuera
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.add('modal-oculto');
                    }
                });
            });
        }

        // Cargar productos en la interfaz
        function cargarProductos() {
            for (const categoria in productos) {
                const contenedor = document.getElementById(`${categoria}-container`);
                if (contenedor) {
                    productos[categoria].forEach(producto => {
                        const elementoProducto = crearElementoProducto(producto);
                        contenedor.appendChild(elementoProducto);
                    });
                }
            }
        }

        // Crear elemento de producto
        function crearElementoProducto(producto) {
            const div = document.createElement('div');
            div.className = 'producto-card';
            div.innerHTML = `
                <h3 data-producto="${producto.nombre}">${producto.nombre}</h3>
                <p>${producto.sabor}</p>
                <p class="precio">$${producto.precio}.00 MXN</p>
                <button class="btn-seleccionar">SELECCIONAR PECADO</button>
            `;
            
            // Asignar evento al botón
            const boton = div.querySelector('.btn-seleccionar');
            boton.addEventListener('click', () => seleccionarProducto(producto));
            
            return div;
        }

        // Seleccionar producto para personalizar
        function seleccionarProducto(producto) {
            productoSeleccionado = producto;
            opcionesSeleccionadas = {};
            mostrarModalOpciones();
        }

        // Mostrar modal de opciones
        function mostrarModalOpciones() {
            const modal = document.getElementById('modal-opciones');
            const tituloModal = document.getElementById('titulo-modal');
            const formulario = document.getElementById('formulario-opciones');
            
            tituloModal.textContent = `Personalizar ${productoSeleccionado.nombre}`;
            formulario.innerHTML = '';
            
            // Crear opciones personalizables
            for (const [opcion, valores] of Object.entries(productoSeleccionado.opciones)) {
                const opcionGroup = document.createElement('div');
                opcionGroup.className = 'opcion-group';
                opcionGroup.innerHTML = `<h3>${opcion}</h3>`;
                
                valores.forEach((valor, index) => {
                    const inputId = `opcion-${opcion}-${index}`;
                    
                    const div = document.createElement('div');
                    
                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.name = opcion;
                    radio.value = valor;
                    radio.id = inputId;
                    radio.checked = index === 0;
                    
                    radio.addEventListener('change', function() {
                        opcionesSeleccionadas[opcion] = valor;
                    });
                    
                    const label = document.createElement('label');
                    label.htmlFor = inputId;
                    label.textContent = valor;
                    
                    div.appendChild(radio);
                    div.appendChild(label);
                    opcionGroup.appendChild(div);
                });
                
                formulario.appendChild(opcionGroup);
                // Establecer valor por defecto
                const primeraOpcion = Object.values(productoSeleccionado.opciones)[0][0];
                opcionesSeleccionadas[opcion] = primeraOpcion;
            }
            
            modal.classList.remove('modal-oculto');
        }

        // Cerrar modal de opciones
        function cerrarModalOpciones() {
            document.getElementById('modal-opciones').classList.add('modal-oculto');
        }

        // Confirmar selección y agregar al carrito
        function confirmarSeleccion() {
            // Calcular precio adicional por opciones
            let precioAdicional = 0;
            let detallesVariables = [];
            
            for (const [opcion, valor] of Object.entries(opcionesSeleccionadas)) {
                if (valor.includes('+$15')) precioAdicional += 15;
                if (valor.includes('+$20')) precioAdicional += 20;
                if (valor.includes('+$10')) precioAdicional += 10;
                
                // Guardar detalles para mostrar en carrito
                if (!valor.includes('+$0')) {
                    detallesVariables.push(`${opcion}: ${valor}`);
                }
            }
            
            const precioTotal = productoSeleccionado.precio + precioAdicional;
            
            const itemCarrito = {
                ...productoSeleccionado,
                opciones: {...opcionesSeleccionadas},
                cantidad: 1,
                precioTotal: precioTotal,
                detallesVariables: detallesVariables
            };
            
            // Verificar si ya existe en el carrito
            const indexExistente = carrito.findIndex(item => 
                item.id === itemCarrito.id && 
                JSON.stringify(item.opciones) === JSON.stringify(itemCarrito.opciones)
            );
            
            if (indexExistente !== -1) {
                carrito[indexExistente].cantidad++;
                carrito[indexExistente].precioTotal += precioTotal;
            } else {
                carrito.push(itemCarrito);
            }
            
            actualizarCarrito();
            cerrarModalOpciones();
            
            // Efecto visual de confirmación
            const carritoBtn = document.getElementById('carrito-btn');
            carritoBtn.classList.add('pulse-effect');
            setTimeout(() => {
                carritoBtn.classList.remove('pulse-effect');
            }, 500);
        }

        // Actualizar carrito
        function actualizarCarrito() {
            const contador = document.getElementById('contador');
            contador.textContent = carrito.reduce((total, item) => total + item.cantidad, 0);
        }

        // Abrir modal de carrito
        function abrirModalCarrito() {
            const modal = document.getElementById('modal-carrito');
            const listaCarrito = document.getElementById('lista-carrito');
            const totalCarrito = document.getElementById('total-carrito');
            
            listaCarrito.innerHTML = '';
            
            if (carrito.length === 0) {
                listaCarrito.innerHTML = '<p class="carrito-vacio">Tu carrito está vacío</p>';
                totalCarrito.textContent = 'Total: $0.00 MXN';
            } else {
                let total = 0;
                
                carrito.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'item-carrito';
                    
                    let detallesHTML = '';
                    if (item.detallesVariables && item.detallesVariables.length > 0) {
                        detallesHTML = `<div class="detalles-variables">`;
                        item.detallesVariables.forEach(detalle => {
                            detallesHTML += `<div>${detalle}</div>`;
                        });
                        detallesHTML += `</div>`;
                    }
                    
                    itemElement.innerHTML = `
                        <div class="item-info">
                            <h4>${item.nombre}</h4>
                            ${detallesHTML}
                            <p class="precio-item">$${item.precioTotal}.00 MXN</p>
                        </div>
                        <div class="item-controles">
                            <button onclick="modificarCantidad(${index}, -1)">-</button>
                            <span>${item.cantidad}</span>
                            <button onclick="modificarCantidad(${index}, 1)">+</button>
                            <button onclick="eliminarItem(${index})">🗑️</button>
                        </div>
                    `;
                    listaCarrito.appendChild(itemElement);
                    total += item.precioTotal;
                });
                
                totalCarrito.textContent = `Total: $${total}.00 MXN`;
            }
            
            modal.classList.remove('modal-oculto');
        }

        // Cerrar modal de carrito
        function cerrarModalCarrito() {
            document.getElementById('modal-carrito').classList.add('modal-oculto');
        }

        // Modificar cantidad de items en carrito
        function modificarCantidad(index, cambio) {
            const item = carrito[index];
            const precioUnitario = item.precioTotal / item.cantidad;
            
            if (cambio === 1) {
                item.cantidad++;
                item.precioTotal += precioUnitario;
            } else if (cambio === -1 && item.cantidad > 1) {
                item.cantidad--;
                item.precioTotal -= precioUnitario;
            }
            
            actualizarCarrito();
            abrirModalCarrito(); // Refrescar vista
        }

        // Eliminar item del carrito
        function eliminarItem(index) {
            carrito.splice(index, 1);
            actualizarCarrito();
            
            if (carrito.length === 0) {
                cerrarModalCarrito();
            } else {
                abrirModalCarrito(); // Refrescar vista
            }
        }

        // Cambiar entre temas
        function cambiarTema() {
            const body = document.body;
            
            if (body.classList.contains('tema-demonios')) {
                body.classList.remove('tema-demonios');
                body.classList.add('tema-angeles');
                document.getElementById('combos-demonios').style.display = 'none';
                document.getElementById('combos-angeles').style.display = 'block';
            } else {
                body.classList.remove('tema-angeles');
                body.classList.add('tema-demonios');
                document.getElementById('combos-demonios').style.display = 'block';
                document.getElementById('combos-angeles').style.display = 'none';
            }
        }

        // Seleccionar combo
        function seleccionarCombo(tipo) {
            comboSeleccionado = combos[tipo];
            opcionesComboSeleccionadas = {};
            mostrarModalCombo();
        }

        // Mostrar modal de combo
        function mostrarModalCombo() {
            const modal = document.getElementById('modal-combo');
            const tituloCombo = document.getElementById('titulo-combo');
            const opcionesCombo = document.getElementById('opciones-combo');
            
            tituloCombo.textContent = `Personalizar ${comboSeleccionado.nombre}`;
            opcionesCombo.innerHTML = '';
            
            // Crear opciones para cada producto del combo
            comboSeleccionado.productos.forEach(nombreProducto => {
                // Buscar el producto en los datos
                let producto = null;
                for (const categoria in productos) {
                    producto = productos[categoria].find(p => p.nombre === nombreProducto);
                    if (producto) break;
                }
                
                if (producto) {
                    const productoGroup = document.createElement('div');
                    productoGroup.className = 'opcion-group';
                    productoGroup.innerHTML = `<h3>${producto.nombre} (${producto.sabor})</h3>`;
                    
                    for (const [opcion, valores] of Object.entries(producto.opciones)) {
                        valores.forEach((valor, index) => {
                            const inputId = `combo-${producto.nombre}-${opcion}-${index}`;
                            
                            const div = document.createElement('div');
                            
                            const radio = document.createElement('input');
                            radio.type = 'radio';
                            radio.name = `${producto.nombre}-${opcion}`;
                            radio.value = valor;
                            radio.id = inputId;
                            radio.checked = index === 0;
                            
                            radio.addEventListener('change', function() {
                                if (!opcionesComboSeleccionadas[producto.nombre]) {
                                    opcionesComboSeleccionadas[producto.nombre] = {};
                                }
                                opcionesComboSeleccionadas[producto.nombre][opcion] = valor;
                            });
                            
                            const label = document.createElement('label');
                            label.htmlFor = inputId;
                            label.textContent = valor;
                            
                            div.appendChild(radio);
                            div.appendChild(label);
                            productoGroup.appendChild(div);
                        });
                        
                        // Establecer valor por defecto
                        if (!opcionesComboSeleccionadas[producto.nombre]) {
                            opcionesComboSeleccionadas[producto.nombre] = {};
                        }
                        opcionesComboSeleccionadas[producto.nombre][opcion] = valores[0];
                    }
                    
                    opcionesCombo.appendChild(productoGroup);
                }
            });
            
            modal.classList.remove('modal-oculto');
        }

        // Cerrar modal de combo
        function cerrarModalCombo() {
            document.getElementById('modal-combo').classList.add('modal-oculto');
        }

        // Confirmar combo y agregar al carrito
        function confirmarCombo() {
            // Calcular precio adicional por opciones
            let precioAdicional = 0;
            let detallesCombo = [];
            
            for (const [nombreProducto, opciones] of Object.entries(opcionesComboSeleccionadas)) {
                for (const [opcion, valor] of Object.entries(opciones)) {
                    if (valor.includes('+$15')) precioAdicional += 15;
                    if (valor.includes('+$20')) precioAdicional += 20;
                    if (valor.includes('+$10')) precioAdicional += 10;
                    
                    // Guardar detalles para mostrar en carrito
                    if (!valor.includes('+$0')) {
                        detallesCombo.push(`${nombreProducto}: ${valor}`);
                    }
                }
            }
            
            const precioTotal = comboSeleccionado.precioBase + precioAdicional;
            
            const itemCarrito = {
                id: `combo-${comboSeleccionado.nombre}`,
                nombre: comboSeleccionado.nombre,
                descripcion: comboSeleccionado.descripcion,
                opciones: {...opcionesComboSeleccionadas},
                cantidad: 1,
                precioTotal: precioTotal,
                detallesVariables: detallesCombo,
                esCombo: true
            };
            
            carrito.push(itemCarrito);
            actualizarCarrito();
            cerrarModalCombo();
            
            // Efecto visual de confirmación
            const carritoBtn = document.getElementById('carrito-btn');
            carritoBtn.classList.add('pulse-effect');
            setTimeout(() => {
                carritoBtn.classList.remove('pulse-effect');
            }, 500);
        }

        // Funciones para los modales de ubicación
        function mostrarSeleccionUbicacion() {
            if (carrito.length === 0) {
                alert('Agrega al menos un producto al carrito primero');
                return;
            }
            
            // Verificar pedido mínimo de 3 productos
            const totalProductos = carrito.reduce((total, item) => total + item.cantidad, 0);
            if (totalProductos < 3) {
                alert('PEDIDO MÍNIMO: Debes agregar al menos 3 productos para realizar tu pedido.');
                document.getElementById('alerta-minimo').style.display = 'flex';
                return;
            }
            
            document.getElementById('modal-carrito').classList.add('modal-oculto');
            document.getElementById('modal-ubicacion').classList.remove('modal-oculto');
        }

        function cerrarModalUbicacion() {
            document.getElementById('modal-ubicacion').classList.add('modal-oculto');
        }

        function abrirGoogleMaps() {
            const address = "Calle Coral 120, colonia Estrella, CDMX";
            window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`, '_blank');
        }

        function enviarPedidoWhatsApp() {
            if (carrito.length === 0) {
                alert('No hay items en el carrito');
                return;
            }
            
            // Verificar pedido mínimo de 3 productos
            const totalProductos = carrito.reduce((total, item) => total + item.cantidad, 0);
            if (totalProductos < 3) {
                alert('PEDIDO MÍNIMO: Debes agregar al menos 3 productos para realizar tu pedido.');
                document.getElementById('alerta-minimo').style.display = 'flex';
                return;
            }
            
            let mensaje = "¡Hola! Quiero realizar el siguiente pedido:%0A%0A";
            
            carrito.forEach(item => {
                if (item.esCombo) {
                    // Formato para combos
                    mensaje += `- COMBO: ${item.nombre}%0A`;
                    mensaje += `  ${item.descripcion}%0A`;
                    
                    // Agregar detalles de variables para combos
                    if (item.detallesVariables && item.detallesVariables.length > 0) {
                        item.detallesVariables.forEach(detalle => {
                            mensaje += `  · ${detalle}%0A`;
                        });
                    }
                    
                    mensaje += `  x${item.cantidad} - $${item.precioTotal}%0A%0A`;
                } else {
                    // Formato para productos individuales
                    mensaje += `- ${item.nombre}`;
                    
                    // Agregar detalles de variables
                    if (item.detallesVariables && item.detallesVariables.length > 0) {
                        item.detallesVariables.forEach(detalle => {
                            mensaje += `%0A  · ${detalle}`;
                        });
                    }
                    
                    mensaje += `%0A  x${item.cantidad} - $${item.precioTotal}%0A%0A`;
                }
            });
            
            const total = carrito.reduce((sum, item) => sum + item.precioTotal, 0);
            mensaje += `%0ATotal: $${total} MXN%0A%0A`;
            mensaje += "Dirección: Calle Coral 120, colonia Estrella, CDMX%0A";
            
            window.open(`https://wa.me/5215611649344?text=${mensaje}`, '_blank');
            
            // Limpiar carrito después de enviar
            carrito = [];
            actualizarCarrito();
            cerrarModalUbicacion();
        }
    </script>
</body>
</html>
